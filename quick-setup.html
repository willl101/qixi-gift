<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«é€Ÿè®¾ç½® Firebase - æ—¶å…‰çº½å¸¦</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #4A90E2;
            text-align: center;
        }
        .step {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #4A90E2;
        }
        .step h2 {
            color: #333;
            margin-top: 0;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: monospace;
        }
        textarea {
            min-height: 150px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            opacity: 0.9;
        }
        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        .code-block {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            overflow-x: auto;
        }
        a {
            color: #4A90E2;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿè®¾ç½®å®æ—¶åŒæ­¥</h1>
        
        <div class="step">
            <h2>æ­¥éª¤ 1ï¼šåˆ›å»ºå…è´¹ Firebase é¡¹ç›®</h2>
            <p>1. ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ï¼Œä¼šè‡ªåŠ¨æ‰“å¼€ Firebase å¹¶åˆ›å»ºé¡¹ç›®ï¼š</p>
            <button onclick="window.open('https://console.firebase.google.com/u/0/project/_/database/create?hl=zh-cn', '_blank')">
                æ‰“å¼€ Firebase Console
            </button>
            <p>2. å¦‚æœæ²¡æœ‰è´¦å·ï¼Œä½¿ç”¨ Google è´¦å·ç™»å½•</p>
            <p>3. ç‚¹å‡»"åˆ›å»ºé¡¹ç›®"ï¼Œè¾“å…¥é¡¹ç›®åç§°ï¼ˆå¦‚ï¼šlove-linkï¼‰</p>
            <p>4. å…³é—­ Google Analyticsï¼ˆä¸éœ€è¦ï¼‰</p>
            <p>5. ç­‰å¾…é¡¹ç›®åˆ›å»ºå®Œæˆ</p>
        </div>

        <div class="step">
            <h2>æ­¥éª¤ 2ï¼šå¯ç”¨æ•°æ®åº“å’Œå­˜å‚¨</h2>
            <p>é¡¹ç›®åˆ›å»ºåï¼š</p>
            <ol>
                <li>ç‚¹å‡»å·¦ä¾§èœå•çš„ <strong>Realtime Database</strong></li>
                <li>ç‚¹å‡»"åˆ›å»ºæ•°æ®åº“"</li>
                <li>é€‰æ‹©åœ°åŒºï¼ˆå»ºè®®é€‰ Singaporeï¼‰</li>
                <li>é€‰æ‹©"ä»¥æµ‹è¯•æ¨¡å¼å¯åŠ¨"</li>
                <li>ç‚¹å‡»"å¯ç”¨"</li>
            </ol>
            <p>ç„¶åï¼š</p>
            <ol>
                <li>ç‚¹å‡»å·¦ä¾§èœå•çš„ <strong>Storage</strong></li>
                <li>ç‚¹å‡»"å¼€å§‹ä½¿ç”¨"</li>
                <li>é€‰æ‹©"ä»¥æµ‹è¯•æ¨¡å¼å¯åŠ¨"</li>
                <li>ç‚¹å‡»"å®Œæˆ"</li>
            </ol>
        </div>

        <div class="step">
            <h2>æ­¥éª¤ 3ï¼šè·å–é…ç½®ä»£ç </h2>
            <p>1. åœ¨ Firebase Console ä¸­ï¼Œç‚¹å‡»é¡¹ç›®è®¾ç½®ï¼ˆé½¿è½®å›¾æ ‡ï¼‰</p>
            <p>2. å‘ä¸‹æ»šåŠ¨åˆ°"æ‚¨çš„åº”ç”¨"éƒ¨åˆ†</p>
            <p>3. ç‚¹å‡» Web å›¾æ ‡ <strong>&lt;/&gt;</strong></p>
            <p>4. è¾“å…¥åº”ç”¨åç§°ï¼ˆå¦‚ï¼šlove-link-webï¼‰</p>
            <p>5. ç‚¹å‡»"æ³¨å†Œåº”ç”¨"</p>
            <p>6. å¤åˆ¶æ˜¾ç¤ºçš„ firebaseConfig å¯¹è±¡ï¼Œç²˜è´´åˆ°ä¸‹é¢ï¼š</p>
            
            <textarea id="configInput" placeholder="ç²˜è´´ä½ çš„ firebaseConfig = { ... } ä»£ç "></textarea>
            
            <button onclick="processConfig()">ç”Ÿæˆé…ç½®æ–‡ä»¶</button>
        </div>

        <div class="step" id="step4" style="display: none;">
            <h2>æ­¥éª¤ 4ï¼šä¸‹è½½é…ç½®æ–‡ä»¶</h2>
            <p>é…ç½®å·²ç”Ÿæˆï¼è¯·ä¸‹è½½ä¸‹é¢çš„æ–‡ä»¶ï¼š</p>
            
            <button onclick="downloadConfig()">ä¸‹è½½ firebase-config.js</button>
            <button onclick="downloadHTML()">ä¸‹è½½ index-realtime.html</button>
            
            <div class="success" id="successMsg">
                âœ… é…ç½®æˆåŠŸï¼å°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾åˆ°é¡¹ç›®ç›®å½•ï¼Œç„¶åè®¿é—® index-realtime.html å³å¯ä½¿ç”¨å®æ—¶åŒæ­¥åŠŸèƒ½ï¼
            </div>
        </div>

        <div class="step">
            <h2>ä½¿ç”¨è¯´æ˜</h2>
            <ul>
                <li>ğŸ“± ä¸¤ä¸ªäººè®¿é—®åŒä¸€ä¸ªç½‘å€å³å¯å®æ—¶åŒæ­¥</li>
                <li>ğŸ” é¦–æ¬¡ä½¿ç”¨è®¾ç½®ç›¸åŒçš„6ä½æˆ¿é—´ä»£ç </li>
                <li>ğŸ“· ä¸Šä¼ çš„ç…§ç‰‡ä¼šç«‹å³åœ¨å¯¹æ–¹è®¾å¤‡æ˜¾ç¤º</li>
                <li>ğŸ’¬ å‘é€çš„å¿ƒæƒ…ä¼šå®æ—¶åŒæ­¥</li>
                <li>ğŸ†“ å®Œå…¨å…è´¹ï¼ŒFirebase å…è´¹é¢åº¦è¶³å¤Ÿä½¿ç”¨</li>
            </ul>
        </div>

        <div class="error" id="errorMsg"></div>
    </div>

    <script>
        let firebaseConfig = null;

        function processConfig() {
            const input = document.getElementById('configInput').value;
            
            try {
                // æå– firebaseConfig å¯¹è±¡
                const match = input.match(/(?:const\s+)?firebaseConfig\s*=\s*({[\s\S]*?});?/);
                if (!match) {
                    throw new Error('æœªæ‰¾åˆ° firebaseConfig å¯¹è±¡ï¼Œè¯·ç¡®ä¿ç²˜è´´å®Œæ•´çš„é…ç½®ä»£ç ');
                }
                
                // è§£æé…ç½®
                eval('firebaseConfig = ' + match[1]);
                
                // éªŒè¯å¿…è¦å­—æ®µ
                if (!firebaseConfig.apiKey || !firebaseConfig.projectId) {
                    throw new Error('é…ç½®ä¸å®Œæ•´ï¼Œè¯·ç¡®ä¿åŒ…å«æ‰€æœ‰å¿…è¦å­—æ®µ');
                }
                
                // æ˜¾ç¤ºæˆåŠŸä¿¡æ¯
                document.getElementById('step4').style.display = 'block';
                document.getElementById('successMsg').style.display = 'block';
                
                // æ»šåŠ¨åˆ°åº•éƒ¨
                document.getElementById('step4').scrollIntoView({ behavior: 'smooth' });
                
            } catch (error) {
                document.getElementById('errorMsg').textContent = 'âŒ é”™è¯¯ï¼š' + error.message;
                document.getElementById('errorMsg').style.display = 'block';
            }
        }

        function downloadConfig() {
            if (!firebaseConfig) return;
            
            const configContent = `// Firebase é…ç½®æ–‡ä»¶ - è‡ªåŠ¨ç”Ÿæˆ
// ç”Ÿæˆæ—¶é—´ï¼š${new Date().toLocaleString('zh-CN')}

const firebaseConfig = ${JSON.stringify(firebaseConfig, null, 2)};

// åˆå§‹åŒ– Firebase
if (typeof firebase !== 'undefined') {
    firebase.initializeApp(firebaseConfig);
    console.log('Firebase åˆå§‹åŒ–æˆåŠŸï¼');
}
`;
            
            downloadFile('firebase-config.js', configContent);
        }

        function downloadHTML() {
            if (!firebaseConfig) return;
            
            const htmlContent = `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¶å…‰çº½å¸¦ - å®æ—¶åŒæ­¥ç‰ˆ</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"><\/script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"><\/script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"><\/script>
    
    <!-- Firebase é…ç½® -->
    <script>
        const firebaseConfig = ${JSON.stringify(firebaseConfig, null, 8)};
        firebase.initializeApp(firebaseConfig);
    <\/script>
</head>
<body>
    <!-- å¤åˆ¶ index-sync.html çš„ body å†…å®¹ -->
    ${document.querySelector('body').innerHTML}
    
    <!-- åŠ è½½åŒæ­¥è„šæœ¬ -->
    <script src="app-sync.js"><\/script>
</body>
</html>`;
            
            downloadFile('index-realtime.html', htmlContent);
        }

        function downloadFile(filename, content) {
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>